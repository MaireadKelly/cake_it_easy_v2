{% load static %}

{# Grid layout: [LEFT MENU] [CENTER LOGO] [RIGHT ICONS] #}
<div class="navbar-grid collapse navbar-collapse" id="main-nav">

  <!-- LEFT: main links -->
  <ul class="navbar-nav main-menu">
    <li class="nav-item">
      <a class="logo-font font-weight-bold nav-link text-brand" href="{% url 'product_cakes' %}">Cakes</a>
    </li>
    <li class="nav-item">
      <a class="logo-font font-weight-bold nav-link text-brand" href="{% url 'product_accessories' %}">Accessories</a>
    </li>
    <li class="nav-item">
      <a class="logo-font font-weight-bold nav-link text-brand" href="{% url 'custom_cake_list' %}">Design Your Own</a>
    </li>
    <li class="nav-item">
      <a class="logo-font font-weight-bold nav-link text-brand" href="{% url 'about' %}">About</a>
    </li>
  </ul>

  <!-- CENTER: logo (desktop only) -->
  <a href="{% url 'home' %}" class="nav-center-logo d-none d-lg-inline-flex">
    <img
      src="{% static 'images/logo.png' %}"
      srcset="{% static 'images/logo@2x.png' %} 2x"
      alt="Cake It Easy"
      width="280" height="96"
      class="nav-center-logo-img">
    <span class="sr-only visually-hidden">Cake It Easy — Home</span>
  </a>

  <!-- RIGHT: icons (desktop) -->
  <ul class="navbar-nav header-icons d-none d-lg-flex">

    <!-- Bag -->
    <li class="nav-item">
      <a class="nav-link icon-link" href="{% url 'view_bag' %}" aria-label="Bag">
        <i class="fas fa-shopping-bag"></i>
        {% if bag_count and bag_count > 0 %}
          <span class="badge bag-count">{{ bag_count }}</span>
        {% endif %}
        <span class="bag-total">€{{ bag_total|default:0|floatformat:2 }}</span>
      </a>
    </li>

    <!-- Search (goes to products with search box there) -->
    <li class="nav-item">
      <a class="nav-link icon-link" href="{% url 'product_list' %}" aria-label="Search">
        <i class="fas fa-search"></i>
      </a>
    </li>

    <!-- My Account: dropdown -->
    <li class="nav-item dropdown account-dd">
      <a class="nav-link icon-link dropdown-toggle" href="#"
         id="user-options" role="button" data-toggle="dropdown"
         aria-haspopup="true" aria-expanded="false" aria-label="My Account">
        <i class="fas fa-user"></i>
      </a>

      <div class="dropdown-menu dropdown-menu-right border-0 shadow-sm"
           aria-labelledby="user-options">
        {% if request.user.is_authenticated %}
          {% if request.user.is_superuser %}
            <a href="/admin/" class="dropdown-item">Product Management</a>
          {% endif %}
          <a href="{% url 'profile' %}" class="dropdown-item">My Profile</a>
          <a href="{% url 'my_orders' %}" class="dropdown-item">My Orders</a>
          <div class="dropdown-divider"></div>
          <a href="{% url 'account_logout' %}" class="dropdown-item">Logout</a>
        {% else %}
          <a href="{% url 'account_signup' %}" class="dropdown-item">Register</a>
          <a href="{% url 'account_login' %}" class="dropdown-item">Login</a>
        {% endif %}
      </div>
    </li>
  </ul>

</div>
