{% load static %}
{# Mobile top header: hamburger • search • centered logo • account • bag #}
<div class="mobile-topbar d-lg-none">
  <!-- Hamburger toggles #main-nav -->
  <button class="btn icon-btn" type="button"
          data-bs-toggle="collapse" data-bs-target="#main-nav"
          aria-controls="main-nav" aria-expanded="false" aria-label="Menu">
    <i class="fa-solid fa-bars"></i>
  </button>

  <!-- Search -->
  <a class="btn icon-btn" href="{% url 'product_list' %}?q=" aria-label="Search">
    <i class="fa-solid fa-magnifying-glass"></i>
  </a>

  <!-- Centered logo (now with a 2× source for retina) -->
  <a class="brand" href="{% url 'home' %}" aria-label="Home">
    <img
      src="{% static 'images/logo.png' %}"
      srcset="{% static 'images/logo@2x.png' %} 2x"
      alt="Cake It Easy"
      class="mobile-logo"
      width="200" height="64"
      loading="eager">
  </a>

  <!-- Account -->
  {% if request.user.is_authenticated %}
    <a class="btn icon-btn" href="{% url 'profile' %}" aria-label="Account">
      <i class="fa-regular fa-user"></i>
    </a>
  {% else %}
    <a class="btn icon-btn" href="{% url 'account_login' %}" aria-label="Login">
      <i class="fa-regular fa-user"></i>
    </a>
  {% endif %}

  <!-- Bag with badge -->
  <a class="btn icon-btn position-relative" href="{% url 'view_bag' %}" aria-label="Bag">
    <i class="fa-solid fa-bag-shopping"></i>
    {% if bag_count and bag_count > 0 %}
      <span class="badge bag-badge">{{ bag_count }}</span>
    {% endif %}
  </a>
</div>
